<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="indi.xezzon.school.jwc.repository.CourseMapper">
    <resultMap id="course" type="indi.xezzon.school.common.model.Course">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="credit" property="credit"/>
        <result column="containment" property="containment"/>
        <association property="teacher" javaType="indi.xezzon.school.common.model.Teacher">
            <id column="id" property="id"/>
            <result column="name" property="name"/>
        </association>
        <collection column="id" property="schedules" ofType="indi.xezzon.school.common.model.CourseSchedule" select="indi.xezzon.school.jwc.repository.CourseScheduleMapper.select">
            <result column="start_week" property="startWeek"/>
            <result column="end_week" property="endWeek"/>
            <result column="ab_week" property="abWeek"/>
            <result column="wk" property="wk"/>
            <result column="tempo" property="tempo"/>
            <result column="classhour" property="classhour"/>
            <result column="building" property="building"/>
            <result column="doorplate" property="doorplate"/>
        </collection>
    </resultMap>
    <select id="list" resultMap="course">
        SELECT *
        FROM course c
        INNER JOIN teacher t
        ON c.teacher_id =t.id
        LIMIT #{limit} OFFSET #{offset}
    </select>
    <select id="count" resultType="java.lang.Integer">
        SELECT COUNT(id) FROM course
    </select>
</mapper>